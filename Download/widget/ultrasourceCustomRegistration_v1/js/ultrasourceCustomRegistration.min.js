define(["jquery","knockout","notifier","ccPasswordValidator","viewModels/selfRegistrationViewModel","viewModels/address","pubsub","CCi18n","ccConstants","navigation","ccLogger","storageApi","ccRestClient","spinner"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){"use strict";var d="";return console.log("Inside custom"),{modalMessageType:t.observable(""),verifiedemail:t.observable(""),oldCompanyName:t.observable(""),modalMessageText:t.observable(""),showErrorMessage:t.observable(!1),nextButtonError:t.observable(!1),saveButtonError:t.observable(!1),userCreated:t.observable(!1),isEmptyPrimaryBusiness:t.observable(!1),isEmptyAddressType:t.observable(!1),companyNameError:t.observable("Company name is mandatory."),isCompanyNameError:t.observable(!1),addressTypeError:t.observable("Please select type of address."),primaryBusinessError:t.observable("Please select primary business."),ignoreBlur:t.observable(!1),selfRegistrationRequest:t.observable(new i),radioSelectedOptionValue:t.observable(),radioSelectedAddressValue:t.observable(),ignoreOrgRequestEmailValidation:t.observable(!0),selectedTitle:t.observable(),specialInstructions:t.observable(),validAddresses:t.observableArray([]),selectedBillingAddress2Type:t.observable(),selectedShippingAddress2Type:t.observable(),homePhoneNumber:t.observable(),isInvalidMobilePhoneNumber:t.observable(!1),isInvalidFaxPhoneNumber:t.observable(!1),isInvalidOfficePhoneNumber:t.observable(!1),isInvalidHomePhoneNumber:t.observable(!1),isInvalidHomePhoneNumber1:t.observable(!1),isInvalidEmailAddress:t.observable(!1),isInvalidPrimaryPhoneNumber:t.observable(!1),isInvalidSecondaryPhoneNumber:t.observable(!1),invalidPhoneNumber:t.observable("Please enter valid office number."),invalidPhoneNumber1:t.observable("Office number is mandatory."),invalidPhoneNumber2:t.observable("Please enter valid home number."),invalidPhoneNumber3:t.observable("Home number is mandatory."),invalidSecondaryPhoneNumber:t.observable("Please enter valid mobile number."),invalidFaxPhoneNumber:t.observable("Please enter valid fax number."),noOfEmployees:t.observable(),receiveEmail:t.observable(!0),userFound:t.observable(!1),organizationFound:t.observable(!1),annualRevenue:t.observable(),secondaryBusiness:t.observable(),primaryBusiness:t.observable(),stateArray:t.observableArray([]),revenueArray:t.observableArray([]),employeeArray:t.observableArray([]),billingAddressCopyCheck:t.observable(!1),primaryBusinessArray:t.observableArray([]),secondaryBusinessArray:t.observableArray([]),titleArray:t.observableArray([]),rolesArray:t.observableArray([]),addressArray:t.observableArray([]),addressTypeArray:t.observableArray([]),countryData:{},title:t.observable(),role:t.observable(),mobileNumber:t.observable(),officeNumber:t.observable(),faxNumber:t.observable(),primaryNumber:t.observable(),secondaryNumber:t.observable(),receiveTexts:t.observable(!0),receiveMails:t.observable(!0),receiveCatalogs:t.observable(!0),liftGateFee:t.observable(!1),insidePickup:t.observable(!1),resPickup:t.observable(!1),limitedAccessPickup:t.observable(!1),addressvalidationMessage:t.observable(),activeIndex:t.observable(),addressValidationRequest:t.observable(),addressValidationRequest1:t.observable(),selectedRegistrationOption:t.observable(),beforeAppear:function(t){console.log("Page :",t),d.hideAllRegisterSections(),setTimeout(function(){e("#CC-submitSelfRegistrationRequestType").show()},1e3),d.liftGateFee.subscribe(function(t){console.log("liftGateFee",t),d.liftGateFee(t),t==1?(e("#customCheckboxLift").addClass("customCheckboxSelect"),e("#customCheckboxLiftb2b").addClass("customCheckboxSelect")):(e("#customCheckboxLift").removeClass("customCheckboxSelect"),e("#customCheckboxLiftb2b").removeClass("customCheckboxSelect"))}),d.insidePickup.subscribe(function(t){console.log("insidePickup",t),d.insidePickup(t),t==1?(e("#customCheckboxInside").addClass("customCheckboxSelect"),e("#customCheckboxInsideb2b").addClass("customCheckboxSelect")):(e("#customCheckboxInside").removeClass("customCheckboxSelect"),e("#customCheckboxInsidb2be").removeClass("customCheckboxSelect"))}),d.limitedAccessPickup.subscribe(function(t){console.log("limitedAccessPickup",t),d.limitedAccessPickup(t),t==1?(e("#customCheckboxLimit").addClass("customCheckboxSelect"),e("#customCheckboxLimitb2b").addClass("customCheckboxSelect")):(e("#customCheckboxLimit").removeClass("customCheckboxSelect"),e("#customCheckboxLimitb2b").removeClass("customCheckboxSelect"))}),console.log("Display")},onLoad:function(r){var i=this;d=r,r.billingAddressCopyCheck.subscribe(function(t){var n;r.billingAddressCopyCheck()===!0?(d.radioSelectedOptionValue()==="Individual"?(document.getElementById("billingAddressCopyCheck-Check").style.background="#ff3333",document.getElementById("individual-shipping-add").selectedIndex=i.addressArray.indexOf(d.selectedBillingAddress2Type()),document.getElementById("CC-userRegistration-address11-label").style="color:black",document.getElementById("CC-userRegistration-address11").style="border: 2px solid #d3d3d",document.getElementById("CC-userRegistration-state1-label").style="color:black",document.getElementById("CC-userRegistration-state1").style="border: 2px solid #d3d3d",document.getElementById("CC-userRegistration-city1-label").style="color:black",document.getElementById("CC-userRegistration-city1").style="border: 2px solid #d3d3d",document.getElementById("CC-userRegistration-zipCode1-label").style="color:black",document.getElementById("CC-userRegistration-zipCode1").style="border: 2px solid #d3d3d"):(document.getElementById("billingAddressCopyCheck-Check1").style.background="#ff3333",document.getElementById("business-shipping-add").selectedIndex=i.addressArray.indexOf(d.selectedBillingAddress2Type()),document.getElementById("CC-userBusinessRegistration-shippingCompany-label").style="color:black",document.getElementById("CC-userBusinessRegistration-shippingCompany").style="border: 2px solid #d3d3d",document.getElementById("CC-userBusinessRegistration-address11-label").style="color:black",document.getElementById("CC-userBusinessRegistration-address11").style="border: 2px solid #d3d3d",document.getElementById("CC-userBusinessRegistration-state1-label").style="color:black",document.getElementById("CC-userBusinessRegistration-state1").style="border: 2px solid #d3d3d",e(".boxtype").append("<style>.boxtype:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),document.getElementById("CC-userBusinessRegistration-zipCode1-label").style="color:black",document.getElementById("CC-userBusinessRegistration-zipCode1").style="border: 2px solid #d3d3d",document.getElementById("CC-userBusinessRegistration-city1-label").style="color:black",document.getElementById("CC-userBusinessRegistration-city1").style="border: 2px solid #d3d3d",document.getElementById("CC-userBusinessRegistration-typeAddress-label").style="color:black",document.getElementById("CC-userBusinessRegistration-typeAddress").style="border: 2px solid #d3d3d",e(".box3").append("<style>.box3:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),e(".box4").append("<style>.box4:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>")),n=d.selfRegistrationRequest().organization.secondaryAddresses()[1].address.type(),d.selectedShippingAddress2Type(d.selectedBillingAddress2Type()),r.selfRegistrationRequest().organization.secondaryAddresses()[0].address.copyTo(r.selfRegistrationRequest().organization.secondaryAddresses()[1].address),r.selfRegistrationRequest().organization.secondaryAddresses()[1].address.type(n)):(n=d.selfRegistrationRequest().organization.secondaryAddresses()[1].address.type(),r.selfRegistrationRequest().organization.secondaryAddresses()[1].address.reset(),r.selfRegistrationRequest().organization.secondaryAddresses()[1].address.resetModified(),r.selfRegistrationRequest().organization.secondaryAddresses()[1].address.type(n),d.radioSelectedOptionValue()==="Individual"?(document.getElementById("billingAddressCopyCheck-Check").style.background="white",document.getElementById("individual-shipping-add").selectedIndex="0"):(document.getElementById("billingAddressCopyCheck-Check1").style.background="white",document.getElementById("business-shipping-add").selectedIndex="0"))}),r.primaryBusiness.subscribe(function(e){r.secondaryBusinessArray([]),e==="Meat & Meat Products"||e==="Poultry & Poultry Products"?r.secondaryBusinessArray.push("Harvest/Slaughter","Further Processing","Custom Slaughter/Processing","Retail","Wholesaler","Co-Packer","Other"):e==="Fish & Fish Products"||e==="Bread & Bakery"||e==="Snacks - Candy/Nut/Other"||e==="Restaurants & Country Clubs"||e==="Grocery Store"||e==="Pet Food"?r.secondaryBusinessArray.push("Harvest/Slaughter","Further Processing","Retail","Wholesaler","Co-Packer","Other"):e==="Dairy & Dairy Products"?r.secondaryBusinessArray.push("Production","Further Processing","Retail","Wholesaler","Co-Packer","Other"):e==="Farms - General/Crop"||e==="Fruits & Vegetables"?r.secondaryBusinessArray.push("Production","Harvest","Further Processing","Retail","Wholesaler","Co-Packer","Other"):(e==="Schools - Elementary/Secondary/College"||e==="Medical - Offices/Hospitals/Manufacturers"||e==="Correctional Institutions"||e==="Other")&&r.secondaryBusinessArray([])}),t.bindingHandlers.enterkey={init:function(t,n,r,i){var s=n();e(t).keypress(function(e){var t=e.which?e.which:e.keyCode;return t===13?(console.log("enter was pressed"),s.call(i),!0):!0}),e(t).keydown(function(e){var t=e.which?e.which:e.keyCode;return t===9||t===13?(console.log("tab was pressed"),s.call(i),!0):!0})}};var s={};s[a.REGIONS]=!0,h.request(a.LIST_COUNTRIES,s,function(e){for(var t=0;t<e.length;t++)if(e[t].countryCode=="US"){var n=e[t],s=[];s[0]=n,i.countryData=s;var o=n.regions;for(var u=0;u<o.length;u++)r.stateArray.push(o[u].abbreviation);break}},function(){}),f.getPath()==="login"?(i.hideAllSections(),e("#CC-loginUserPane").show()):f.getPath()==="registration"&&(i.hideAllRegisterSections(),e("#CC-registerUserType").show()),i.Individual=t.computed({read:function(){return i.radioSelectedOptionValue()=="Individual"},write:function(e){e&&i.radioSelectedOptionValue("Individual")}},i),i.Business=t.computed({read:function(){return i.radioSelectedOptionValue()=="Business"},write:function(e){e&&i.radioSelectedOptionValue("Business")}},i),i.Distributor=t.computed({read:function(){return i.radioSelectedOptionValue()=="Distributor"},write:function(e){e&&i.radioSelectedOptionValue("Distributor")}},i),i.mobileNumber.extend({pattern:{params:"^[0-9()+ -]+$",message:u.t("ns.common:resources.invalidInput")},maxLength:{params:a.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),i.homePhoneNumber.extend({pattern:{params:"^[0-9()+ -]+$",message:u.t("ns.common:resources.invalidInput")},maxLength:{params:a.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),i.titleArray.push("","Mr.","Mrs.","Ms.","Miss.","Dr."),i.addressArray.push("","Suite","Apartment","Building","P.O. Box"),i.addressTypeArray.push("","Business","Residential"),i.rolesArray.push("Engineering","Finance/Legal","Maintenance","Management","OHSE","Operations/Production","Other","Purchasing","Sales"),i.employeeArray.push(" 1 - 10"," 11 - 25"," 26 - 50"," 51 - 100"," 100 - 150"," 151 - 200"," 251 - 500"," 500+"),i.revenueArray.push("$0-$500k","$500k-$1M","$1M-$2.5M","$2.5M-$5M","$5M-$10M","$10M-$25M","$25M-$50M","$50M+"),i.primaryBusinessArray.push("Meat & Meat Products","Poultry & Poultry Products","Fish & Fish Products","Dairy & Dairy Products","Farms - General/Crop","Fruits & Vegetables","Bread & Bakery","Snacks - Candy/Nut/Other","Restaurants & Country Clubs","Grocery Store","Pet Food","Schools - Elementary/Secondary/College","Medical - Offices/Hospitals/Manufacturers","Correctional Institutions","Other"),r.user().ignoreEmailValidation(!1),r.user().delaySuccessNotification()&&(n.sendSuccess(r.WIDGET_ID,r.translate("updateSuccessMsg"),!0),r.user().delaySuccessNotification(!1)),e.Topic(o.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).subscribe(function(t){t.widgetId===r.WIDGET_ID&&(i.userCreated(!0),i.hideLoginModal(),i.showErrorMessage(!1),e.when(r.user().autoLoginComplete).then(function(){n.clearSuccess(r.WIDGET_ID),n.sendSuccess(r.WIDGET_ID,r.translate("createAccountSuccess")),e(window).scrollTop("0"),r.user().autoLoginComplete=e.Deferred()}))}),e.Topic(o.topicNames.USER_RESET_PASSWORD_SUCCESS).subscribe(function(t){i.hideAllSections(),i.hideLoginModal(),e("#CC-forgotPasswordMessagePane").show()}),e.Topic(o.topicNames.USER_RESET_PASSWORD_FAILURE).subscribe(function(e){n.sendError(r.WIDGET_ID,e.message,!0)}),e.Topic(o.topicNames.USER_PASSWORD_GENERATED).subscribe(function(t){e("#alert-modal-change").text(u.t("ns.common:resources.resetPasswordModalOpenedText")),r.user().ignoreEmailValidation(!1),i.hideAllSections(),e("#CC-forgotPasswordSectionPane").show(),e("#CC-forgotPwd-input").focus(),r.user().emailAddressForForgottenPwd(""),r.user().emailAddressForForgottenPwd.isModified(!1)}),e.Topic(o.topicNames.USER_PASSWORD_EXPIRED).subscribe(function(t){e("#alert-modal-change").text(u.t("ns.common:resources.resetPasswordModalOpenedText")),r.user().ignoreEmailValidation(!1),i.hideAllSections(),e("#CC-forgotPasswordSectionPane").show(),e("#CC-forgotPwd-input").focus(),r.user().emailAddressForForgottenPwd(""),r.user().emailAddressForForgottenPwd.isModified(!1)}),e.Topic(o.topicNames.USER_CREATION_FAILURE).subscribe(function(e){e.widgetId===r.WIDGET_ID&&(r.user().resetPassword(),i.modalMessageType("error"),i.modalMessageText(e.message),i.showErrorMessage(!0))}),e.Topic(o.topicNames.USER_LOGIN_FAILURE).subscribe(function(e){i.modalMessageType("error"),e.errorCode&&e.errorCode===a.ACCOUNT_ACCESS_ERROR_CODE?i.modalMessageText(u.t("ns.common:resources.accountError")):i.modalMessageText("Invalid credentials"),i.modalMessageText("Invalid credentials"),i.showErrorMessage(!0)}),e.Topic(o.topicNames.USER_LOGIN_SUCCESSFUL).subscribe(function(t){i.hideLoginModal(),i.showErrorMessage(!1),n.clearSuccess(r.WIDGET_ID),e("#CC-loginHeader-myAccount").focus(),e("#CC-loginHeader-myAccount-mobile").focus()}),f.setLoginHandler(function(t){e.Topic(o.topicNames.PAGE_READY).subscribe(function(n){if(n){n.pageId==undefined&&(n.pageId="");var s=[];f.loginHandlerPage?s=f.loginHandlerPage.split("/"):f.loginHandlerPage==""&&(s=[""]);if(f.loginHandlerPage==undefined||f.loginHandlerPage==null||f.loginHandlerPage!==""&&n.path!==undefined&&n.path!==null&&f.loginHandlerPage.indexOf(n.path)==-1)return}t&&t[0]&&t[0].linkToRedirect&&(r.user().pageToRedirect(t[0].linkToRedirect),r.user().loggedInUserName()!=""&&!r.user().isUserSessionExpired()&&r.user().handleSessionExpired()),setTimeout(function(){e("#CC-headermodalpane").modal("show"),i.hideAllSections(),i.userCreated(!1),e("#CC-loginUserPane").show(),e("#CC-headermodalpane").on("shown.bs.modal",function(){!r.user().loggedIn()&&!r.user().isUserLoggedOut()&&r.user().login()&&r.user().login()!=""&&r.user().isUserSessionExpired()?(r.user().populateUserFromLocalData(!0),e("#CC-login-password-input").focus(),r.user().password.isModified(!1)):(e("#CC-login-input").focus(),r.user().login.isModified(!1)),f.loginHandlerPage=null}),e("#CC-headermodalpane").on("hidden.bs.modal",function(){!i.userCreated()&&!r.user().loggedIn()&&(e("#CC-loginUserPane").css("display")=="block"||e("#CC-registerUserPane").css("display")=="block"||e("#CC-updatePasswordPane").css("display")=="block"||e("#CC-forgotPasswordSectionPane").css("display")=="block"||e("#CC-forgotPasswordMessagePane").css("display")=="block"||e("#CC-updatePasswordErrorMessagePane").css("display")=="block")&&i.cancelLoginModal(r)})},a.PROFILE_UNAUTHORIZED_DEFAULT_TIMEOUT)})}),e.Topic(o.topicNames.PAGE_PARAMETERS).subscribe(function(){var t=this.parameters.occsAuthToken;t&&r.user().validateTokenForPasswordUpdate(t,function(t){e("#CC-headermodalpane").modal("show"),i.hideAllSections(),e("#CC-updatePasswordPane").show(),e("#CC-headermodalpane").on("shown.bs.modal",function(){e("#CC-updatePassword-email").focus()})},function(t){e("#CC-headermodalpane").modal("show"),i.hideAllSections(),e("#CC-updatePasswordErrorMessagePane").show()})});if(i.countryData.length)i.addAddressToOrganization(i.countryData);else{var s={};s[a.REGIONS]=!0,h.request(a.LIST_COUNTRIES,s,function(e){for(var t=0;t<e.length;t++)if(e[t].countryCode=="US"){var n=e[t],s=[];s[0]=n,i.countryData=s;var o=n.regions;for(var u=0;u<o.length;u++)r.stateArray.push(o[u].abbreviation);break}i.addAddressToOrganization(i.countryData)},function(){})}i.addValidationsForSelfRegistration(),e(document).on("hide.bs.modal","#CC-headermodalpane",function(){e("#CC-loginUserPane").css("display")=="block"?e("#alert-modal-change").text(u.t("ns.common:resources.loginModalClosedText")):e("#CC-registerUserPane").css("display")=="block"?e("#alert-modal-change").text(u.t("ns.common:resources.registrationModalClosedText")):e("#CC-forgotPasswordSectionPane").css("display")=="block"?e("#alert-modal-change").text(u.t("ns.common:resources.resetPasswordModalClosedText")):e("#CC-updatePasswordPane").css("display")=="block"&&e("#alert-modal-change").text(u.t("ns.common:resources.updatePasswordModalClosedText"))}),e(document).on("show.bs.modal","#CC-headermodalpane",function(){e("#CC-loginUserPane").css("display")=="block"?e("#alert-modal-change").text(u.t("ns.common:resources.loginModalOpenedText")):e("#CC-registerUserPane").css("display")=="block"?e("#alert-modal-change").text(u.t("ns.common:resources.registrationModalOpenedText")):e("#CC-forgotPasswordSectionPane").css("display")=="block"?e("#alert-modal-change").text(u.t("ns.common:resources.resetPasswordModalOpenedText")):e("#CC-updatePasswordPane").css("display")=="block"&&e("#alert-modal-change").text(u.t("ns.common:resources.updatePasswordModalOpenedText"))}),e(document).on("hidden.bs.modal","#CC-headermodalpane",function(){(!i.userCreated()&&!r.user().loggedIn()&&e("#CC-updatePasswordMessagePane").css("display")=="block"||e("#CC-updatePasswordPane").css("display")=="block"||e("#CC-forgotPasswordSectionPane").css("display")=="block"||e("#CC-forgotPasswordMessagePane").css("display")=="block"||e("#CC-updatePasswordErrorMessagePane").css("display")=="block")&&i.cancelLoginModal(r)}),jQuery(document).ready(function(){if(jQuery(window).width()<500){var e=jQuery("#roles-div1"),t=jQuery("#rolesB2B"),n=jQuery("#roles-div"),r=jQuery("#rolesB2C"),i=e.clone(),s=t.clone(),o=n.clone(),u=r.clone();e.is(":empty")||(e.replaceWith(s),t.replaceWith(i)),n.is(":empty")||(n.replaceWith(u),r.replaceWith(o))}})},removeMessageFromPanel:function(){var e=this,t=e.id(),r=e.type();n.deleteMessage(t,r)},emailAddressFocused:function(e){return d.isInvalidEmailAddress(!1),d.ignoreBlur&&d.ignoreBlur()?!0:(d.user().ignoreEmailValidation(!0),!0)},emailAddressLostFocus:function(t){return e("#CC-userRegistration-emailAddress-error1").hide(),d.ignoreBlur&&d.ignoreBlur()?!0:(d.user().ignoreEmailValidation(!1),[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.email())===-1&&(d.validateEmail(d.selfRegistrationRequest().profile.email())?(document.getElementById("CC-userRegistration-emailAddress-label").style="color:black",document.getElementById("CC-userRegistration-emailAddress").style="border: 2px solid #d3d3d",d.isInvalidEmailAddress(!1),d.userSearch()):d.isInvalidEmailAddress(!0)),!0)},passwordFieldFocused:function(e){return d.ignoreBlur&&d.ignoreBlur()?!0:(d.user().ignorePasswordValidation(!0),!0)},passwordFieldLostFocus:function(e){return d.ignoreBlur&&d.ignoreBlur()?!0:(d.user().ignorePasswordValidation(!1),!0)},confirmPwdFieldFocused:function(e){return d.ignoreBlur&&d.ignoreBlur()?!0:(d.user().ignoreConfirmPasswordValidation(!0),!0)},confirmPwdFieldLostFocus:function(e){return d.ignoreBlur&&d.ignoreBlur()?!0:(d.user().ignoreConfirmPasswordValidation(!1),!0)},handleLabelsInIEModals:function(){!navigator.userAgent.match(/Trident/)||e("#CC-LoginRegistrationModal label").removeClass("inline")},registerUser:function(t,r){if("click"===r.type||("keydown"===r.type||"keypress"===r.type)&&r.keyCode===13)n.clearError(this.WIDGET_ID),t.user().shippingAddressBook([]),t.user().updateLocalData(!1,!1),t.user().validateUser()&&e.Topic(o.topicNames.USER_REGISTRATION_SUBMIT).publishWith(t.user(),[{message:"success",widgetId:t.WIDGET_ID}]);return!0},hideLoginModal:function(){e("#CC-headermodalpane").modal("hide"),e("body").removeClass("modal-open"),e(".modal-backdrop").remove()},handleLogin:function(t,r){if("click"===r.type||("keydown"===r.type||"keypress"===r.type)&&r.keyCode===13)n.clearError(this.WIDGET_ID),t.user().validateLogin()&&(t.user().updateLocalData(!1,!1),e.Topic(o.topicNames.USER_LOGIN_SUBMIT).publishWith(t.user(),[{message:"success"}]));return!0},handleCancel:function(t,r){if("click"===r.type||("keydown"===r.type||"keypress"===r.type)&&r.keyCode===13)n.clearError(this.WIDGET_ID),t.user().isUserSessionExpired()&&(e.Topic(o.topicNames.USER_LOGOUT_SUBMIT).publishWith([{message:"success"}]),this.hideLoginModal());return!0},savePassword:function(t,r){if("click"===r.type||("keydown"===r.type||"keypress"===r.type)&&r.keyCode===13)n.clearError(this.WIDGET_ID),t.user().ignoreConfirmPasswordValidation(!1),t.user().ignoreEmailValidation(!1),t.user().emailAddressForForgottenPwd.isModified(!0),t.user().isPasswordValid(!0)&&t.user().emailAddressForForgottenPwd&&t.user().emailAddressForForgottenPwd.isValid()&&t.user().updateExpiredPasswordUsingToken(t.user().token,t.user().emailAddressForForgottenPwd(),t.user().newPassword(),t.user().confirmPassword(),function(e){t.hideAllSections(),f.goTo("/login")},function(n){t.hideAllSections(),e("#CC-updatePasswordErrorMessagePane").show()});return!0},cancelLoginModal:function(e){if(e.hasOwnProperty("user")){e.user().handleCancel();if(e.user().pageToRedirect()&&e.user().pageToRedirect()==e.links().checkout.route&&e.cart().items().length>0){var t=e.user().pageToRedirect();e.user().pageToRedirect(null),f.goTo(t)}else f.cancelLogin();e.user().pageToRedirect(null),n.clearError(e.WIDGET_ID),e.user().clearUserData(),e.user().profileRedirect()}else f.cancelLogin()},handleLogout:function(t){if(t.isUserProfileEdited())return!0;n.clearSuccess(this.WIDGET_ID),n.clearError(this.WIDGET_ID),t.updateLocalData(t.loggedinAtCheckout(),!1),e.Topic(o.topicNames.USER_LOGOUT_SUBMIT).publishWith([{message:"success"}])},cancelRegistration:function(e){n.clearSuccess(this.WIDGET_ID),n.clearError(this.WIDGET_ID),this.hideLoginModal(),e.user().reset(),this.showErrorMessage(!1),e.user().pageToRedirect(null)},validateAddressType:function(e,t){if(t!==undefined)if("click"===t.type||"keydown"===t.type||"keypress"===t.type||"change"===t.type||"mouseout"===t.type){var n=d.selfRegistrationRequest().organization.secondaryAddresses()[1].address,r=!1;n.type()?d.isEmptyAddressType(!1):d.isEmptyAddressType(!0)}},validatePrimaryBusiness:function(e,t){t!==undefined&&("click"===t.type||"keydown"===t.type||"keypress"===t.type||"change"===t.type||"mouseout"===t.type)&&([null,undefined,""].indexOf(d.primaryBusiness())===-1?(console.log("Inside validatePrimaryBusiness"),d.isEmptyPrimaryBusiness(!1)):d.isEmptyPrimaryBusiness(!0))},validateNoOfEmployees:function(e,t){t!==undefined&&("click"===t.type||"keydown"===t.type||"keypress"===t.type||"change"===t.type||"mouseout"===t.type)&&[null,undefined,""].indexOf(d.noOfEmployees())===-1&&console.log("Inside validatePrimaryBusiness")},validateAnnualRevenue:function(e,t){t!==undefined&&("click"===t.type||"keydown"===t.type||"keypress"===t.type||"change"===t.type||"mouseout"===t.type)&&[null,undefined,""].indexOf(d.annualRevenue())===-1&&console.log("Inside validatePrimaryBusiness")},validateAddress:function(t,n){if(n!==undefined&&n.keyCode==9){var r={parent:"#main",posTop:"20em",posLeft:"50%"};e("#main").addClass("loadingIndicator"),e("#main").css("position","relative"),p.create(r);var i=d.selfRegistrationRequest().organization.secondaryAddresses()[t].address,s=!1;if(i.address1()&&i.city()&&i.postalCode()&&i.country()&&i.state()||i.address2()){if(i.validateForShippingMethod()){var o={};if(i){t==="0"?(o={address1:i.address1(),special_delivery_instructions:d.specialInstructions(),address2:d.selectedBillingAddress2Type()+" "+i.address2(),city:i.city(),state:i.state(),postalCode:i.postalCode(),country:i.country()},d.activeIndex(t)):t==="1"&&(o={address1:i.address1(),address2:d.selectedShippingAddress2Type()+" "+i.address2(),city:i.city(),state:i.state(),postalCode:i.postalCode(),country:i.country()},d.activeIndex(t));var u={url:"/ccstorex/custom/v1/addressValidation",method:"POST",data:JSON.stringify(o),async:!1,contentType:"application/json"},a=!1;t==="0"?JSON.stringify(d.addressValidationRequest)!==JSON.stringify(o)?a=!0:(e("#main").removeClass("loadingIndicator"),p.destroy()):JSON.stringify(d.addressValidationRequest1)!==JSON.stringify(o)?a=!0:(e("#main").removeClass("loadingIndicator"),p.destroy()),a?(d.billingAddressCopyCheck(!1),t==="0"?d.addressValidationRequest=o:d.addressValidationRequest1=o,e.ajax(u).done(function(t){e("#main").removeClass("loadingIndicator"),p.destroy(),console.log("Response :: ",t),t&&t.validatedAddresses&&(console.log("Under valid ADDRESS"),t.hasOwnProperty("messages")?(d.addressvalidationMessage(t.messages[0].summary),d.validAddresses([]),e("#CC-addressSuggestionMessagePane").show()):t.validatedAddresses.length>0&&(console.log("Under valid ADDRESS LENGTH"),d.addressvalidationMessage(""),d.validAddresses(t.validatedAddresses),e("#CC-addressSuggestionMessagePane").show()))})):console.log("already have")}return s}e("#main").removeClass("loadingIndicator"),p.destroy()}else e("#main").removeClass("loadingIndicator"),p.destroy()}return!0},closecompanyexistmodal:function(){return e("#CC-companyAlreadyRegistered-Modal").hide(),!0},closesuggesionmodal:function(){return e("#CC-addressSuggestionMessagePane").hide(),!0},clickRegistration:function(t){n.clearSuccess(this.WIDGET_ID),n.clearError(this.WIDGET_ID),t.reset(),this.hideAllSections(),e("#CC-registerUserPane").show(),this.showErrorMessage(!1),e("#CC-headermodalpane").on("shown.bs.modal",function(){e("#CC-userRegistration-firstname").focus(),t.firstName.isModified(!1)})},companySearch:function(t,n){var r=this;if([null,undefined,""].indexOf(r.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName())!==-1)r.isCompanyNameError(!0);else if(d.oldCompanyName()!==r.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName().trim()){r.isCompanyNameError(!1);var i={orgName:r.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName().trim()};d.oldCompanyName(r.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName().trim());var s={parent:"#main",posTop:"20em",posLeft:"50%"};e("#main").addClass("loadingIndicator"),e("#main").css("position","relative"),p.create(s),e.ajax({url:"/ccstorex/custom/v1/orgSearch",method:"POST",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){e("#main").removeClass("loadingIndicator"),p.destroy(),console.log("Success : ",t),t.hasOwnProperty("successCode")?(r.organizationFound(!0),e("#CC-companyAlreadyRegistered-Modal").show()):r.organizationFound(!1)}).fail(function(t){r.organizationFound(!1),e("#main").removeClass("loadingIndicator"),p.destroy(),console.log("error",t)})}},userSearch:function(t,n){var r=this;if([null,undefined,""].indexOf(r.selfRegistrationRequest().profile.email())!==-1)e("#CC-userRegistration-emailAddress").blur();else if(!r.validateEmail(r.selfRegistrationRequest().profile.email()))d.isInvalidEmailAddress(!0);else if(d.verifiedemail()!==r.selfRegistrationRequest().profile.email()){d.verifiedemail(r.selfRegistrationRequest().profile.email()),d.isInvalidEmailAddress(!1);var i={parent:"#main",posTop:"20em",posLeft:"50%"};e("#main").addClass("loadingIndicator"),e("#main").css("position","relative"),p.create(i);var s={email:r.selfRegistrationRequest().profile.email().toLowerCase()};e.ajax({url:"/ccstorex/custom/v1/userSearch",method:"POST",contentType:"application/json",data:JSON.stringify(s)}).done(function(t){e("#main").removeClass("loadingIndicator"),p.destroy(),console.log("Success : ",t),t.hasOwnProperty("items")&&(t.items.length>0?(r.userFound(!0),e("#CC-Email-Modal").modal("show")):r.userFound(!1))}).fail(function(t){e("#main").removeClass("loadingIndicator"),p.destroy(),r.userFound(!1),console.log("error",t)})}},createContactRequest:function(t,r){var i=this,s={parent:"#main",posTop:"20em",posLeft:"50%"};e("#main").addClass("loadingIndicator"),e("#main").css("position","relative"),p.create(s);if(i.selfRegistrationRequest().profile.email()===undefined||i.selfRegistrationRequest().profile.email()===""){n.sendError("contact-creation","Please enter the email address",!0),e("#main").removeClass("loadingIndicator"),p.destroy();return}var o="";i.receiveEmail()?o="yes":o="no";var u={firstName:i.selfRegistrationRequest().profile.firstName(),email:i.selfRegistrationRequest().profile.email(),lastName:i.selfRegistrationRequest().profile.lastName(),name_title:i.selectedTitle(),office_number:i.officeNumber(),home_phone_number:i.homePhoneNumber(),fax_number:i.faxNumber(),mobile_number:i.mobileNumber(),receive_texts:i.receiveTexts(),receive_mailings_special_offers:i.receiveMails(),receive_catalog:i.receiveCatalogs(),receiveEmail:o,position_title:i.title(),org_role:i.role()},f={name:i.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName()};h.request(a.ENDPOINT_CREATE_PROFILE_REQUEST,{requestedOrganization:f,profile:u},function(t){console.log("success"+t),e("#main").removeClass("loadingIndicator"),p.destroy(),i.hideAllSections(),e("#CC-companyAlreadyRegistered-Modal").hide(),e("#CC-businessUserContactInfo").hide(),e("#CC-emailRequestSent").show()},function(t){console.log("error"+t),n.sendError("contact-creation","Error while processing request",!0),e("#main").removeClass("loadingIndicator"),p.destroy(),e("#CC-companyAlreadyRegistered-Modal").hide()},null)},clickLogin:function(t){n.clearSuccess(this.WIDGET_ID),n.clearError(this.WIDGET_ID),t.reset(),this.hideAllSections(),e("#CC-loginUserPane").show(),this.showErrorMessage(!1),e("#CC-headermodalpane").on("shown.bs.modal",function(){!t.loggedIn()&&t.login()&&t.login()!=""&&t.isUserSessionExpired()?(t.populateUserFromLocalData(!0),e("#CC-login-password-input").focus(),t.password.isModified(!1)):(e("#CC-login-input").focus(),t.login.isModified(!1)),f.loginHandlerPage=null})},handleMouseUp:function(e){return e.ignoreBlur(!1),e.user().ignoreConfirmPasswordValidation(!1),!0},setSelectedAddress:function(){d.closesuggesionmodal();if(d.activeIndex()){var t=parseInt(d.activeIndex()),n={};if(d.radioSelectedOptionValue()==="Business"||d.radioSelectedOptionValue()==="Distributor"){d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address1(d.validAddresses()[0].line1),d.validAddresses()[0].line2!==""&&d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address2(d.validAddresses()[0].line2),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.postalCode(d.validAddresses()[0].postalCode),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.city(d.validAddresses()[0].city),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.country(d.validAddresses()[0].country),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.state(d.validAddresses()[0].region),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.selectedState(d.validAddresses()[0].region),t===0?n={orgAddress:{address1:d.validAddresses()[0].line1,country:d.validAddresses()[0].country,address2:d.selectedBillingAddress2Type()+" "+d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address2(),postalCode:d.validAddresses()[0].postalCode,city:d.validAddresses()[0].city,state:d.validAddresses()[0].region}}:t===1&&(n={orgAddress:{address1:d.validAddresses()[0].line1,country:d.validAddresses()[0].country,address2:d.selectedShippingAddress2Type()+" "+d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address2(),postalCode:d.validAddresses()[0].postalCode,city:d.validAddresses()[0].city,state:d.validAddresses()[0].region}});var r={url:"/ccstorex/custom/v1/orgSearchOnAddress",method:"POST",contentType:"application/json",data:JSON.stringify(n)};e.ajax(r).done(function(t){console.log("Response :: ",t),t&&(t.items&&(t.items.length>0?d.organizationFound(!0):d.organizationFound(!1)),console.log("response"+t),e("#CC-companyAlreadyRegistered-Modal").show())}).fail(function(e){d.organizationFound(!1),console.log("error",e)})}else d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address1(d.validAddresses()[0].line1),d.validAddresses()[0].line2!==""&&d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address2(d.validAddresses()[0].line2),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.postalCode(d.validAddresses()[0].postalCode),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.city(d.validAddresses()[0].city),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.country(d.validAddresses()[0].country),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.state(d.validAddresses()[0].region),d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.selectedState(d.validAddresses()[0].region);var i;t===0?(i={address1:d.validAddresses()[0].line1,address2:d.selectedBillingAddress2Type()+" "+d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address2(),city:d.validAddresses()[0].city,state:d.validAddresses()[0].region,postalCode:d.validAddresses()[0].postalCode,country:d.validAddresses()[0].country},d.addressValidationRequest=i):t===1&&(i={address1:d.validAddresses()[0].line1,address2:d.selectedBillingAddress2Type()+" "+d.selfRegistrationRequest().organization.secondaryAddresses()[t].address.address2(),city:d.validAddresses()[0].city,state:d.validAddresses()[0].region,postalCode:d.validAddresses()[0].postalCode,country:d.validAddresses()[0].country},d.addressValidationRequest1=i)}},handleMouseDown:function(e){return e.ignoreBlur(!0),e.user().ignoreConfirmPasswordValidation(!0),!0},handleModalDownClick:function(e,t){return t.target===t.currentTarget&&(this.ignoreBlur(!0),this.user().ignoreConfirmPasswordValidation(!0)),!0},showRegistrationSection:function(t){e("#alert-modal-change").text(u.t("ns.common:resources.registrationModalOpenedText")),this.hideAllSections(),e("#CC-registerUserPane").show(),e("#CC-userRegistration-firstname").focus(),t.user().firstName.isModified(!1),n.clearError(this.WIDGET_ID),n.clearSuccess(this.WIDGET_ID),t.user().reset(),this.showErrorMessage(!1)},navigateToLogin:function(){return f.goTo("/login?email="+d.selfRegistrationRequest().profile.email()),!0},showForgotPasswordSection:function(t){e("#alert-modal-change").text(u.t("ns.common:resources.forgottenPasswordModalOpenedText")),this.user().ignoreEmailValidation(!1),this.hideAllSections(),e("#CC-forgotPasswordSectionPane").show(),e("#CC-forgotPwd-input").focus(),this.user().emailAddressForForgottenPwd(""),this.user().emailAddressForForgottenPwd.isModified(!1)},hideAllSections:function(){e("#CC-loginUserPane").hide(),e("#CC-registerUserPane").hide(),e("#CC-forgotPasswordSectionPane").hide(),e("#CC-updatePasswordPane").hide(),e("#CC-updatePasswordMessagePane").hide(),e("#CC-forgotPasswordMessagePane").hide(),e("#CC-updatePasswordErrorMessagePane").hide(),e("#CC-verfication-emaillink").hide(),e("#CC-companyAlreadyRegistered-Modal").hide(),e("#CC-verfication-emaillink").hide()},hideAllRegisterSections:function(){e("#CC-registerBusinessUserPane").hide(),e("#CC-submitSelfRegistrationRequestPane").hide(),e("#CC-submitSelfRegistrationRequestType").hide(),e("#CC-individualUserContactInfo").hide(),e("#CC-businessUserContactInfo").hide(),e("#CC-businessUserShippingBillingContactInfo").hide()},showIndividualUserContactInfo:function(t,n){var r=!0;return[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.firstName())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userRegistration-firstname-label").style="color:#f33",document.getElementById("CC-userRegistration-firstname").style="border: 2px solid #f33"),[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.lastName())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userRegistration-lastname-label").style="color:#f33",document.getElementById("CC-userRegistration-lastname").style="border: 2px solid #f33"),[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.email())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userRegistration-emailAddress-label").style="color:#f33",document.getElementById("CC-userRegistration-emailAddress").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.homePhoneNumber())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userRegistration-homeNumber-label").style="color:#f33",document.getElementById("CC-userRegistration-homeNumber").style="border: 2px solid #f33"),d.isInvalidHomePhoneNumber()&&(r=!1,document.getElementById("CC-userRegistration-homeNumber-label").style="color:#f33",document.getElementById("CC-userRegistration-homeNumber").style="border: 2px solid #f33"),[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.email())===-1&&d.isInvalidEmailAddress()&&(r=!1,document.getElementById("CC-userRegistration-emailAddress-label").style="color:#f33",document.getElementById("CC-userRegistration-emailAddress").style="border: 2px solid #f33"),d.isInvalidMobilePhoneNumber()&&(r=!1,document.getElementById("CC-userRegistration-mobileNumber-label").style="color:#f33",document.getElementById("CC-userRegistration-mobileNumber").style="border: 2px solid #f33"),d.isInvalidFaxPhoneNumber()&&(r=!1,document.getElementById("CC-userRegistration-faxNumber-label").style="color:#f33",document.getElementById("CC-userRegistration-faxNumber").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.homePhoneNumber())===-1&&[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.lastName())===-1&&[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.email())===-1&&[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.firstName())===-1&&t.nextButtonError(!1),r&&(d.userFound()?e("#CC-Email-Modal").modal("show"):(e("#CC-Email-Modal").modal("hide"),t.hideAllRegisterSections(),t.nextButtonError(!1),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.selectedCountry("US"),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.selectedCountry("US"),e("#CC-individualUserContactInfo").show())),!1},showBusinessUserContactInfo:function(t,n){var r=!0;return[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.firstName())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userBusinessRegistration-firstname-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-firstname").style="border: 2px solid #f33"),[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.lastName())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userBusinessRegistration-lastname-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-lastname").style="border: 2px solid #f33"),[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.email())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userBusinessRegistration-emailAddress-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-emailAddress").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.officeNumber())!==-1&&(r=!1,e("#CC-userBusinessRegistration-officeNumber").blur(),t.nextButtonError(!0)),d.isInvalidHomePhoneNumber()&&(r=!1,document.getElementById("CC-userBusinessRegistration-officeNumber-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-officeNumber").style="border: 2px solid #f33"),d.isInvalidEmailAddress()&&(r=!1,document.getElementById("CC-userBusinessRegistration-emailAddress-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-emailAddress").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.role())!==-1&&(r=!1,t.nextButtonError(!0),document.getElementById("CC-userBusinessRegistration-role-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-role").style="border: 2px solid #f33"),d.isInvalidMobilePhoneNumber()&&(r=!1,document.getElementById("CC-userBusinessRegistration-mobileNumber-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-mobileNumber").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.officeNumber())===-1&&[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.lastName())===-1&&[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.email())===-1&&[null,undefined,""].indexOf(d.selfRegistrationRequest().profile.firstName())===-1&&[null,undefined,""].indexOf(t.role())===-1&&t.nextButtonError(!1),r&&(d.userFound()?(r=!1,t.nextButtonError(!1),e("#CC-Email-Modal").modal("show")):(t.hideAllRegisterSections(),t.nextButtonError(!1),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.selectedCountry("US"),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.selectedCountry("US"),e("#CC-businessUserContactInfo").show())),!1},backContactIndividual:function(t,n){return t.hideAllRegisterSections(),e("#CC-submitSelfRegistrationRequestType").show(),!1},backAddressIndividual:function(t,n){return t.hideAllRegisterSections(),e("#CC-submitSelfRegistrationRequestPane").show(),!1},backContactBusiness:function(t,n){return t.hideAllRegisterSections(),e("#CC-submitSelfRegistrationRequestType").show(),!1},backAddressBusiness:function(t,n){return t.hideAllRegisterSections(),e("#CC-registerBusinessUserPane").show(),!1},addAddressToOrganization:function(e){var t=this,n={translate:function(e,t){return u.t("ns.common:resources."+e,t)}},r=new s(a.ACCOUNTS,null,n,e);r.country.rules.remove(function(e){return e.rule=="required"}),r.country.extend({required:{params:!0,onlyIf:function(){return r.city()||r.postalCode()||r.phoneNumber()||r.address1()||r.address2()},message:u.t("ns.common:resources.countryMandatoryText")}}),r.state.rules.remove(function(e){return e.rule=="required"}),r.state.extend({required:{params:!0,onlyIf:function(){return r.city()||r.postalCode()||r.phoneNumber()||r.address1()||r.address2()||r.country()},message:u.t("ns.common:resources.stateMandatoryText")}}),r.address1.rules.remove(function(e){return e.rule=="required"}),r.address1.extend({required:{params:!0,onlyIf:function(){return r.city()||r.postalCode()||r.country()||r.phoneNumber()||r.address2()},message:u.t("ns.common:resources.addressOneMandatoryText")}}),r.companyName.extend({required:{params:!0,onlyIf:function(){return r.city()||r.postalCode()||r.country()||r.phoneNumber()||r.address2()||r.address1()},message:"Company name is mandatory"}}),r.city.rules.remove(function(e){return e.rule=="required"}),r.city.extend({required:{params:!0,onlyIf:function(){return r.address1()||r.postalCode()||r.country()||r.phoneNumber()||r.address2()},message:u.t("ns.common:resources.cityMandatoryText")},maxLength:{params:a.CYBERSOURCE_CITY_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),r.postalCode.rules.remove(function(e){return e.rule=="required"}),r.postalCode.extend({required:{params:!0,onlyIf:function(){return r.address1()||r.city()||r.country()||r.phoneNumber()||r.address2()},message:u.t("ns.common:resources.postalMandatoryText")},maxLength:{params:a.CYBERSOURCE_POSTAL_CODE_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),r.phoneNumber.rules.remove(function(e){return e.rule=="required"}),r.phoneNumber.extend({required:{params:!0,onlyIf:function(){return r.address1()||r.postalCode()||r.country()||r.city()||r.address2()},message:u.t("ns.common:resources.phoneNumberMandatoryText")},pattern:{params:"^[0-9()+ -]+$",message:u.t("ns.common:resources.invalidInput")},maxLength:{params:a.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}});var i=new s(a.ACCOUNTS,null,n,e);i.country.rules.remove(function(e){return e.rule=="required"}),i.country.extend({required:{params:!0,onlyIf:function(){return i.city()||i.postalCode()||i.phoneNumber()||i.address1()||i.address2()},message:u.t("ns.common:resources.countryMandatoryText")}}),i.state.rules.remove(function(e){return e.rule=="required"}),i.state.extend({required:{params:!0,onlyIf:function(){return i.city()||i.postalCode()||i.phoneNumber()||i.address1()||i.address2()||i.country()},message:u.t("ns.common:resources.stateMandatoryText")}}),i.address1.rules.remove(function(e){return e.rule=="required"}),i.address1.extend({required:{params:!0,onlyIf:function(){return i.city()||i.postalCode()||i.country()||i.phoneNumber()||i.address2()},message:u.t("ns.common:resources.addressOneMandatoryText")}}),i.city.rules.remove(function(e){return e.rule=="required"}),i.city.extend({required:{params:!0,onlyIf:function(){return i.address1()||i.postalCode()||i.country()||i.phoneNumber()||i.address2()},message:u.t("ns.common:resources.cityMandatoryText")},maxLength:{params:a.CYBERSOURCE_CITY_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),i.postalCode.rules.remove(function(e){return e.rule=="required"}),i.postalCode.extend({required:{params:!0,onlyIf:function(){return i.address1()||i.city()||i.country()||i.phoneNumber()||i.address2()},message:u.t("ns.common:resources.postalMandatoryText")},maxLength:{params:a.CYBERSOURCE_POSTAL_CODE_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),i.phoneNumber.rules.remove(function(e){return e.rule=="required"}),i.phoneNumber.extend({required:{params:!0,onlyIf:function(){return i.address1()||i.postalCode()||i.country()||i.city()||i.address2()},message:u.t("ns.common:resources.phoneNumberMandatoryText")},pattern:{params:"^[0-9()+ -]+$",message:u.t("ns.common:resources.invalidInput")},maxLength:{params:a.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH,message:u.t("ns.common:resources.invalidInput")}}),r.selectedCountry("US"),i.selectedCountry("US"),t.selfRegistrationRequest().organization.secondaryAddresses.push({address:r},{address:i})},resetForgotPassword:function(e,t){if("click"===t.type||("keydown"===t.type||"keypress"===t.type)&&t.keyCode===13)e.user().ignoreEmailValidation(!1),e.user().emailAddressForForgottenPwd.isModified(!0),e.user().emailAddressForForgottenPwd&&e.user().emailAddressForForgottenPwd.isValid()&&e.user().resetForgotPassword();return!0},createOrganizationRequest:function(t,r){var i=this,s=t.selfRegistrationRequest().organization.secondaryAddresses()[1].address,o=t.selfRegistrationRequest().organization.secondaryAddresses()[0].address,u=!0;[null,undefined,""].indexOf(s.companyName())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-shippingCompany-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-shippingCompany").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.address1())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-address11-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-address11").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.city())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-city1-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-city1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.postalCode())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-zipCode1-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-zipCode1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.type())!==-1&&(u=!1,t.saveButtonError(!0),e(".box4").append("<style>.box4:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userBusinessRegistration-typeAddress-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-typeAddress").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.state())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-state1-label").style="color:#f33",e(".box3").append("<style>.box3:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userBusinessRegistration-state1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(o.address1())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-address1-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-address1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(o.companyName())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-billingCompany-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-billingCompany").style="border: 2px solid #f33"),[null,undefined,""].indexOf(o.city())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-city-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-city").style="border: 2px solid #f33"),[null,undefined,""].indexOf(o.postalCode())!==-1&&(u=!1,t.saveButtonError(!0),document.getElementById("CC-userBusinessRegistration-zipCode-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-zipCode").style="border: 2px solid #f33"),[null,undefined,""].indexOf(o.state())!==-1&&(u=!1,t.saveButtonError(!0),e(".box1").append("<style>.box1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userBusinessRegistration-state-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-state").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.primaryBusiness())!==-1&&(u=!1,t.saveButtonError(!0),e(".boxprimarybusiness").append("<style>.boxprimarybusiness:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userBusinessRegistration-primaryBusiness-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-primaryBusiness").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.noOfEmployees())!==-1&&(u=!1,t.saveButtonError(!0),e(".boxprimarybusiness1").append("<style>.boxprimarybusiness1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userBusinessRegistration-numberOfEmployees-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-numberOfEmployees").style="border: 2px solid #f33"),[null,undefined,""].indexOf(t.annualRevenue())!==-1&&(u=!1,t.saveButtonError(!0),e(".boxprimarybusiness2").append("<style>.boxprimarybusiness2:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userBusinessRegistration-annualRevenue-label").style="color:#f33",document.getElementById("CC-userBusinessRegistration-annualRevenue").style="border: 2px solid #f33");if(u)if(t.organizationFound())e("#CC-companyAlreadyRegistered-Modal").show();else{t.isEmptyAddressType(!1),t.isEmptyPrimaryBusiness(!1),t.saveButtonError(!1);var l={parent:"#main",posTop:"20em",posLeft:"50%"};e("#main").addClass("loadingIndicator"),e("#main").css("position","relative"),p.create(l),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.isDefaultBillingAddress(!0),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.isDefaultShippingAddress(!0),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.isDefaultAddress(!0),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.isDefaultAddress(!0),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.address2(t.selectedShippingAddress2Type()+" "+s.address2()),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.address2(t.selectedBillingAddress2Type()+" "+o.address2()),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.country("US"),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.country("US"),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.state(t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.selectedState()),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.state(t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.selectedState()),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.x_account_type=t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.type(),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.x_account_type=t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.type(),t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.special_delivery_instructions=d.specialInstructions(),t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.special_delivery_instructions=d.specialInstructions();if(t.selfRegistrationRequest().profile.email()===undefined||t.selfRegistrationRequest().profile.email()===""){n.sendError("contact-creation","Please enter the email address",!0),e("#main").removeClass("loadingIndicator"),p.destroy();return}var c="";t.receiveEmail()?c="yes":c="no";var v={address:{alias:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.alias(),prefix:t.selectedTitle(),firstName:t.selfRegistrationRequest().profile.firstName(),middleName:"",lastName:t.selfRegistrationRequest().profile.lastName(),suffix:"",country:"US",postalCode:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.postalCode(),address1:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.address1(),address2:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.address2(),address3:"",city:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.city(),state:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.state(),county:"",phoneNumber:"",email:t.selfRegistrationRequest().profile.email(),jobTitle:"",companyName:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName(),faxNumber:t.faxNumber(),addressType:[],type:"",repositoryId:"",isDefaultBillingAddress:!0,isDefaultShippingAddress:!1,predefinedAddressTypes:[],isTypeModified:!1,computedDefaultBilling:!1,computedDefaultShipping:!1,selectedCountry:"US",selectedState:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.state(),selectedAddressTypes:[],isDefaultAddress:!0,dynamicProperties:[],computedAddressType:[],computedCountry:["US"],Address_Status:!0,types:[]},addressType:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.alias()},m={address:{alias:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.alias(),prefix:t.selectedTitle(),firstName:t.selfRegistrationRequest().profile.firstName(),middleName:"",lastName:t.selfRegistrationRequest().profile.lastName(),suffix:"",country:"US",postalCode:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.postalCode(),address1:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.address1(),address2:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.address2(),address3:"",city:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.city(),state:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.state(),county:"",phoneNumber:"",email:t.selfRegistrationRequest().profile.email(),jobTitle:"",companyName:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.companyName(),faxNumber:t.faxNumber(),addressType:[],type:"",repositoryId:"",isDefaultBillingAddress:!1,isDefaultShippingAddress:!0,predefinedAddressTypes:[],isTypeModified:!1,computedDefaultBilling:!1,computedDefaultShipping:!1,selectedCountry:"US",selectedState:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.state(),selectedAddressTypes:[],isDefaultAddress:!0,dynamicProperties:[],computedAddressType:[],computedCountry:["US"],x_account_type:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.type(),special_delivery_instructions:d.specialInstructions(),LIFT_GATE:d.liftGateFee(),INDE_INPU:d.insidePickup(),LAPU_LADL:d.limitedAccessPickup(),Address_Status:!0,types:[]},addressType:t.selfRegistrationRequest().organization.secondaryAddresses()[1].address.alias()},g=[];g[0]=v,g[1]=m;var y={firstName:t.selfRegistrationRequest().profile.firstName(),email:t.selfRegistrationRequest().profile.email(),lastName:t.selfRegistrationRequest().profile.lastName(),name_title:t.selectedTitle(),home_phone_number:t.homePhoneNumber(),office_number:t.officeNumber(),fax_number:t.faxNumber(),mobile_number:t.mobileNumber(),receive_texts:t.receiveTexts(),receive_mailings_special_offers:t.receiveMails(),receive_catalog:t.receiveCatalogs(),receiveEmail:c,position_title:t.title(),org_role:t.role()},b={name:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName(),secondaryAddresses:g,primary_business:t.primaryBusiness(),secondary_business:t.secondaryBusiness(),num_of_employees:t.noOfEmployees(),annual_revenue:t.annualRevenue(),org_type:t.radioSelectedOptionValue()};h.request(a.ENDPOINT_CREATE_ORGANIZATION_REQUEST,{organization:b,profile:y,name:t.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName()},function(t){console.log("success"+t),e("#main").removeClass("loadingIndicator"),p.destroy(),f.goTo("/accountConfirmation"),e("#CC-verfication-emaillink").show()},function(t){n.sendError("contact-creation","Error while processing request",!0),e("#main").removeClass("loadingIndicator"),p.destroy()},null)}},createCustomer:function(t,r){var i=t.selfRegistrationRequest().organization.secondaryAddresses()[1].address,s=t.selfRegistrationRequest().organization.secondaryAddresses()[0].address,o=!0;[null,undefined,""].indexOf(i.address1())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-address11-label").style="color:#f33",document.getElementById("CC-userRegistration-address11").style="border: 2px solid #f33"),[null,undefined,""].indexOf(i.city())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-city1-label").style="color:#f33",document.getElementById("CC-userRegistration-city1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(i.postalCode())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-zipCode1-label").style="color:#f33",document.getElementById("CC-userRegistration-zipCode1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(i.type())!==-1&&(o=!1,t.saveButtonError(!0),e(".boxtype").append("<style>.boxtype:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userRegistration-typeAddress-label").style="color:#f33",document.getElementById("CC-userRegistration-typeAddress").style="border: 2px solid #f33"),[null,undefined,""].indexOf(i.state())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-state1-label").style="color:#f33",e(".box1").append("<style>.box1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userRegistration-state1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.address1())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-address1-label").style="color:#f33",document.getElementById("CC-userRegistration-address1").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.city())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-city-label").style="color:#f33",document.getElementById("CC-userRegistration-city").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.postalCode())!==-1&&(o=!1,t.saveButtonError(!0),document.getElementById("CC-userRegistration-zipCode-label").style="color:#f33",document.getElementById("CC-userRegistration-zipCode").style="border: 2px solid #f33"),[null,undefined,""].indexOf(s.state())!==-1&&(o=!1,t.saveButtonError(!0),e(".box1").append("<style>.box1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),document.getElementById("CC-userRegistration-state-label").style="color:#f33",document.getElementById("CC-userRegistration-state").style="border: 2px solid #f33");if(o){t.saveButtonError(!1);var u=this,l={parent:"#main",posTop:"20em",posLeft:"50%"};e("#main").addClass("loadingIndicator"),e("#main").css("position","relative"),p.create(l),i.validateNow(),s.validateNow();if(s.city()===""||s.postalCode()===""){n.sendError("register","Mandatory Fields are missing",!0);return}if(i.city()===""||i.postalCode()===""){n.sendError("register","Mandatory Fields are missing",!0);return}if(t.selfRegistrationRequest().profile.lastName()===""||t.selfRegistrationRequest().profile.firstName()===""||t.selfRegistrationRequest().profile.email()===undefined||t.selfRegistrationRequest().profile.email()===""||i.country()===""||i.city()===""||i.state()===""||s.country()===""||s.city()===""||s.state()===""){n.sendError("register","Please enter all mandatory Fields",!0),e("#main").removeClass("loadingIndicator"),p.destroy();return}var c={lastName:t.selfRegistrationRequest().profile.lastName(),country:i.country(),address3:i.address3(),address2:t.selectedShippingAddress2Type()+" "+i.address2(),city:i.city(),address1:i.address1(),special_delivery_instructions:d.specialInstructions(),postalCode:i.postalCode(),companyName:i.companyName(),isDefaultAddress:!0,isDefaultShippingAddress:!0,firstName:t.selfRegistrationRequest().profile.firstName(),phoneNumber:i.phoneNumber(),alias:i.alias(),state:i.state(),selectedCountry:i.selectedCountry(),selectedState:i.selectedState(),type:i.type(),x_account_type:i.type(),x_billing_contact:t.selfRegistrationRequest().profile.firstName()+" "+t.selfRegistrationRequest().profile.lastName(),x_shipping_contact:t.selfRegistrationRequest().profile.firstName()+" "+t.selfRegistrationRequest().profile.lastName(),x_main_contact:t.selfRegistrationRequest().profile.firstName()+" "+t.selfRegistrationRequest().profile.lastName(),LIFT_GATE:d.liftGateFee(),INDE_INPU:d.insidePickup(),LAPU_LADL:d.limitedAccessPickup()},v={lastName:t.selfRegistrationRequest().profile.lastName(),country:s.country(),address3:s.address3(),address2:t.selectedBillingAddress2Type()+" "+s.address2(),city:s.city(),address1:s.address1(),special_delivery_instructions:d.specialInstructions(),postalCode:s.postalCode(),companyName:s.companyName(),isDefaultAddress:!1,isDefaultBillingAddress:!0,firstName:t.selfRegistrationRequest().profile.firstName(),phoneNumber:s.phoneNumber(),alias:s.alias(),state:s.state(),selectedCountry:s.selectedCountry(),selectedState:s.selectedState(),type:s.type(),x_account_type:i.type(),x_billing_contact:t.selfRegistrationRequest().profile.firstName()+" "+t.selfRegistrationRequest().profile.lastName(),x_shipping_contact:t.selfRegistrationRequest().profile.firstName()+" "+t.selfRegistrationRequest().profile.lastName(),x_main_contact:t.selfRegistrationRequest().profile.firstName()+" "+t.selfRegistrationRequest().profile.lastName()},m=[];d.billingAddressCopyCheck()||(m[0]=v),m.length>0?m[1]=c:m[0]=c;var g="";t.receiveEmail()?g="yes":g="no";var y={firstName:t.selfRegistrationRequest().profile.firstName(),lastName:t.selfRegistrationRequest().profile.lastName(),email:t.selfRegistrationRequest().profile.email(),password:t.user().newPassword(),name_title:t.selectedTitle(),home_phone_number:t.homePhoneNumber(),mobile_number:t.mobileNumber(),receive_texts:t.receiveTexts(),receive_mailings_special_offers:t.receiveMails(),receive_catalog:t.receiveCatalogs(),shippingAddresses:m,default_billingAddress_data:v,receiveEmail:g};console.log(t.selfRegistrationRequest().organization.secondaryAddresses(),"Secondary addresses"),h.request(a.ENDPOINT_CREATE_PROFILE,y,function(t){console.log("success"+t),e("#main").removeClass("loadingIndicator"),p.destroy(),f.goTo("/accountConfirmation")},function(t){n.sendError("contact-creation","Error while processing request",!0),e("#main").removeClass("loadingIndicator"),p.destroy()},null)}},submitSelfRegistrationRequest:function(t,n){var r=t;if("click"===n.type||"blur"===n.type||n.keyCode===9)if(n.target.value===""){n.target.style="border: 2px solid #f33";if(n.target.id!==null){var i=n.target.id+"-label";document.getElementById(i).style="color:#f33",(n.target.id==="CC-userRegistration-state1"||n.target.id==="CC-userRegistration-state")&&e(".box1").append("<style>.box1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),n.target.id==="CC-userBusinessRegistration-role"&&e(".boxrole1").append("<style>.box1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),n.target.id==="CC-userRegistration-typeAddress"&&e(".boxtype").append("<style>.boxtype:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),n.target.id==="CC-userBusinessRegistration-state1"&&e(".box3").append("<style>.box3:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),n.target.id==="CC-userBusinessRegistration-state"&&e(".box1").append("<style>.box1:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),n.target.id==="CC-userBusinessRegistration-typeAddress"&&e(".box4").append("<style>.box4:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>"),n.target.id==="CC-userBusinessRegistration-primaryBusiness"&&e(".boxprimaryBusiness").append("<style>.boxprimaryBusiness:before{border-right:2px solid rgb(255, 51, 51);border-top:2px solid rgb(255, 51, 51);border-bottom:2px solid rgb(255, 51, 51);}</style>")}}else{n.target.style="border: 2px solid #d3d3d";if(n.target.id!==null){var i=n.target.id+"-label";document.getElementById(i).style="color:black",(n.target.id==="CC-userRegistration-state1"||n.target.id==="CC-userRegistration-state")&&e(".box1").append("<style>.box1:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),n.target.id==="CC-userBusinessRegistration-role"&&e(".boxrole1").append("<style>.boxtype:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),n.target.id==="CC-userRegistration-typeAddress"&&e(".boxtype").append("<style>.boxtype:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),n.target.id==="CC-userBusinessRegistration-state1"&&e(".box3").append("<style>.box3:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),n.target.id==="CC-userBusinessRegistration-state"&&e(".box1").append("<style>.box1:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),n.target.id==="CC-userBusinessRegistration-typeAddress"&&e(".box4").append("<style>.box4:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>"),n.target.id==="CC-userBusinessRegistration-primaryBuiness"&&e(".boxprimaryBusiness").append("<style>.boxprimaryBusiness:before{border-right:1px solid #d3d3d3;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;}</style>")}n.target.id==="CC-userRegistration-emailAddress"&&r.emailAddressLostFocus(),n.target.id==="CC-userBusinessRegistration-emailAddress"&&r.emailAddressLostFocus()}if("click"===n.type||("keydown"===n.type||"keypress"===n.type)&&n.keyCode===13){r.selfRegistrationRequest().organization.secondaryAddresses()[0].address.companyName(r.selfRegistrationRequest().name()),console.log(r.selfRegistrationRequest().organization.secondaryAddresses()[0].address);var s=r.selfRegistrationRequest().organization.secondaryAddresses()[0].address;r.userFound()||r.selfRegistrationRequest.createSelfRegistrationRequest(r.createOrganizationRequestSuccess.bind(r),r.createOrganizationRequestFailure.bind(r))}return!0},redirectToLogin:function(){var t=this;return t.hideAllRegisterSections(),e("#CC-Email-Modal").hide(),e(".modal-backdrop").remove(),f.goTo("/login?email="+d.selfRegistrationRequest().profile.email()),!0},showRegistrationModal:function(){var t=this;if(t.radioSelectedOptionValue()===t.selectedRegistrationOption()){if(t.radioSelectedOptionValue()==="Individual")t.hideAllRegisterSections(),e("#CC-submitSelfRegistrationRequestPane").show();else if(t.radioSelectedOptionValue()==="Business"||t.radioSelectedOptionValue()==="Distributor")t.hideAllRegisterSections(),e("#CC-registerBusinessUserPane").show()}else t.radioSelectedOptionValue()==="Individual"?(t.selectedRegistrationOption("Individual"),t.hideAllRegisterSections(),t.homePhoneNumber(""),t.mobileNumber(""),t.isInvalidEmailAddress(!1),t.isInvalidHomePhoneNumber1(!1),t.isInvalidHomePhoneNumber(!1),t.isInvalidMobilePhoneNumber(!1),t.mobileNumber(""),t.role(""),t.faxNumber(""),t.receiveEmail(!0),t.receiveTexts(!0),t.receiveMails(!0),t.receiveCatalogs(!0),t.selectedTitle(""),t.isInvalidFaxPhoneNumber(!1),t.selfRegistrationRequest().reset(),e("#CC-submitSelfRegistrationRequestPane").show()):t.radioSelectedOptionValue()==="Business"?(t.selectedRegistrationOption("Business"),t.selfRegistrationRequest().reset(),t.homePhoneNumber(""),t.faxNumber(""),t.selectedTitle(""),t.officeNumber(""),-t.isInvalidMobilePhoneNumber(!1),t.isInvalidHomePhoneNumber(!1),t.isInvalidHomePhoneNumber1(!1),t.role(""),t.receiveEmail(!0),t.receiveTexts(!0),t.receiveMails(!0),t.receiveCatalogs(!0),t.mobileNumber(""),t.isInvalidFaxPhoneNumber(!1),t.isInvalidEmailAddress(!1),t.hideAllRegisterSections(),e("#CC-registerBusinessUserPane").show()):t.radioSelectedOptionValue()==="Distributor"&&(t.selectedRegistrationOption("Distributor"),t.selfRegistrationRequest().reset(),t.homePhoneNumber(""),t.faxNumber(""),t.selectedTitle(""),t.officeNumber(""),-t.isInvalidMobilePhoneNumber(!1),t.isInvalidHomePhoneNumber(!1),t.isInvalidHomePhoneNumber1(!1),t.role(""),t.receiveEmail(!0),t.receiveTexts(!0),t.receiveMails(!0),t.receiveCatalogs(!0),t.mobileNumber(""),t.isInvalidFaxPhoneNumber(!1),t.isInvalidEmailAddress(!1),t.hideAllRegisterSections(),e("#CC-registerBusinessUserPane").show())},showShippingBillingContactInfo:function(t,n){t.hideAllRegisterSections(),e("#CC-businessUserShippingBillingContactInfo").show()},addValidationsForSelfRegistration:function(){var e=this;e.selfRegistrationRequest().profile.firstName.extend({required:{params:!0},maxLength:{params:a.REPOSITORY_STRING_MAX_LENGTH,message:u.t("ns.common:resources.maxlengthValidationMsg",{maxLength:a.REPOSITORY_STRING_MAX_LENGTH})}}),e.selfRegistrationRequest().profile.email.extend({required:{params:!0},email:{params:!0,onlyIf:function(){return!e.ignoreOrgRequestEmailValidation()},message:u.t("ns.common:resources.emailAddressInvalid")},maxLength:{params:a.EMAIL_ID_MAX_LENGTH,message:u.t("ns.common:resources.maxlengthValidationMsg",{maxLength:a.EMAIL_ID_MAX_LENGTH})}}),e.selfRegistrationRequest().profile.lastName.extend({required:{params:!0},maxLength:{params:a.REPOSITORY_STRING_MAX_LENGTH,message:u.t("ns.common:resources.maxlengthValidationMsg",{maxLength:a.REPOSITORY_STRING_MAX_LENGTH})}}),e.selfRegistrationRequest().name.extend({required:{params:!0,message:u.t("ns.common:resources.companyNameRequired")},maxLength:{params:a.ORG_REQ_NAME_MAX_LENGTH,message:u.t("ns.common:resources.maxlengthValidationMsg",{maxLength:a.ORG_REQ_NAME_MAX_LENGTH})}}),e.selfRegistrationRequest().requesterComments.extend({maxLength:{params:1e3,message:u.t("ns.common:resources.requesterCommentMaxLengthText")}}),e.selfRegistrationRequest().relatedOrganizationName.extend({maxLength:{params:a.REPOSITORY_STRING_MAX_LENGTH,message:u.t("ns.common:resources.maxlengthValidationMsg",{maxLength:a.REPOSITORY_STRING_MAX_LENGTH})}})},validateOfficePhoneNumber:function(e,t){if(t.target.value===""||t.target.value===null)d.isInvalidOfficePhoneNumber(!1);else{var n=(""+t.target.value).replace(/\D/g,""),r=n.match(/^(\d{3})(\d{3})(\d{4})$/);r!==null?d.isInvalidOfficePhoneNumber(!1):d.isInvalidOfficePhoneNumber(!0)}},validateMobilePhoneNumber:function(e,t){if(t.target.value===""||t.target.value===null)d.isInvalidMobilePhoneNumber(!1);else{t.target.style="border: 2px solid #d3d3d";if(t.target.id!==null){var n=t.target.id+"-label";document.getElementById(n).style="color:black"}var r=(""+t.target.value).replace(/\D/g,""),i=r.match(/^(\d{3})(\d{3})(\d{4})$/);if(i!==null){d.isInvalidMobilePhoneNumber(!1),t.target.style="border: 2px solid #d3d3d";if(t.target.id!==null){var n=t.target.id+"-label";document.getElementById(n).style="color:black"}}else{d.isInvalidMobilePhoneNumber(!0),t.target.style="border: 2px solid #f33";if(t.target.id!==null){var n=t.target.id+"-label";document.getElementById(n).style="color:#f33"}}}},validateFaxPhoneNumber:function(e,t){if(t.target.value===""||t.target.value===null)d.isInvalidFaxPhoneNumber(!1);else{var n=(""+t.target.value).replace(/\D/g,""),r=n.match(/^(\d{3})(\d{3})(\d{4})$/);r!==null?(d.isInvalidFaxPhoneNumber(!1),document.getElementById("CC-userRegistration-faxNumber-label").style="color:black",document.getElementById("CC-userRegistration-faxNumber").style="border: 2px solid #d3d3d"):(d.isInvalidFaxPhoneNumber(!0),document.getElementById("CC-userRegistration-faxNumber-label").style="color:#f33",document.getElementById("CC-userRegistration-faxNumber").style="border: 2px solid #f33")}},validatePrimaryPhoneNumber:function(e,t){if(t.target.value===""||t.target.value===null)d.isInvalidPrimaryPhoneNumber(!1);else{var n=(""+t.target.value).replace(/\D/g,""),r=n.match(/^(\d{3})(\d{3})(\d{4})$/);r!==null?d.isInvalidPrimaryPhoneNumber(!1):d.isInvalidPrimaryPhoneNumber(!0)}},validateSecondaryPhoneNumber:function(e,t){if(t.target.value===""||t.target.value===null)d.isInvalidSecondaryPhoneNumber(!1);else{var n=(""+t.target.value).replace(/\D/g,""),r=n.match(/^(\d{3})(\d{3})(\d{4})$/);r!==null?d.isInvalidSecondaryPhoneNumber(!1):d.isInvalidSecondaryPhoneNumber(!0)}},validateHomePhoneNumber:function(e,t){if(t.target.value===""||t.target.value===null)d.isInvalidHomePhoneNumber1(!0),d.isInvalidHomePhoneNumber(!1);else{t.target.style="border: 2px solid #d3d3d";if(t.target.id!==null){var n=t.target.id+"-label";document.getElementById(n).style="color:black"}d.isInvalidHomePhoneNumber1(!1);var r=(""+t.target.value).replace(/\D/g,""),i=r.match(/^(\d{3})(\d{3})(\d{4})$/);if(i!==null){d.isInvalidHomePhoneNumber(!1),t.target.style="border: 2px solid #d3d3d";if(t.target.id!==null){var n=t.target.id+"-label";document.getElementById(n).style="color:black"}}else{d.isInvalidHomePhoneNumber(!0),t.target.style="border: 2px solid #f33";if(t.target.id!==null){var n=t.target.id+"-label";document.getElementById(n).style="color:#f33"}}}},validateEmail:function(e){console.log("Inside email validation");const t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return t.test(e)},translate:function(e){return u.t("ns.common:resources."+e)},handleCustomLogout:function(t){console.log(t);var n=t;e.Topic(o.topicNames.USER_CLEAR_CART).publish([{message:"success"}]);var r=function(){e.Topic(o.topicNames.USER_LOGOUT_SUCCESSFUL).publish([{message:"success"}]),c.getInstance().removeItem(a.LOCAL_STORAGE_SHOPPER_CONTEXT),c.getInstance().removeItem(a.LOCAL_STORAGE_CURRENT_CONTEXT),h.clearStoredValue(a.LOCAL_STORAGE_PRICELISTGROUP_ID),n.clearUserData();if(n.refreshPageAfterContactLogout())n.refreshPageAfterContactLogout(!1);else{var t={pageId:f.getPath()};e.Topic(o.topicNames.PAGE_VIEW_CHANGED).publish(t)}f.goTo("/home")};n.loggedIn()?(n.parentOrganization&&n.parentOrganization.name()&&n.refreshPageAfterContactLogout(!0),n.client().logout(r,i)):(n.clearUserData(),e.Topic(o.topicNames.USER_LOGOUT_SUCCESSFUL).publish([{message:"success"}]),n.profileRedirect());var i=function(e){n.clearUserData(),n.profileRedirect(),window.location.assign(n.contextData.global.links.home.route)}}}})