define(["jquery","knockout","ccConstants","agentViewModels/account-site-selector","storageApi"],function(e,t,n,r,i){"use strict";return{elementName:"ultrasource-account-selector",disableAccountSelector:t.observable(!1),onLoad:function(e){var s=this;s.accountAndSiteSelector=r,s.isB2BProfile=t.observable(!1);var o={};e.profileDetail?(o=e.profileDetail,s.isB2BProfile(e.profileDetail.profileType==n.B2B_PROFILE_TYPE?!0:!1)):s.isB2BProfile(e.user().isB2BProfileType());if(s.isB2BProfile()){var u=i.getInstance().readFromMemory(n.LOCAL_STORAGE_ORGANIZATION_ID)?i.getInstance().readFromMemory(n.LOCAL_STORAGE_ORGANIZATION_ID):null;s.accountAndSiteSelector.currentOrganizationId(u),s.accountAndSiteSelector.allOrganizations().length==0&&s.accountAndSiteSelector.fetchOrganizations(null,null,e.user().id())}else s.accountAndSiteSelector.currentOrganizationId(null);s.disableAccountSelector=t.computed(function(){return e.cart()&&e.cart().currentOrderState()=="QUOTED"||s.accountAndSiteSelector.allOrganizations().length==1})},handleOrganizationSelection:function(e){typeof this.handleOrganizationSelection=="function"&&this.handleOrganizationSelection()}}})